# Use Ubuntu 16.04 (Xenial) as the base image
FROM ubuntu:16.04

# Install required packages
RUN apt-get update && apt-get install -y \
    apache2 \
    libapache2-mod-php7.0 \  
    php7.0 \
    php7.0-cli \
    php7.0-common \
    php7.0-mysql \
    php7.0-gd \
    php7.0-bz2 \
    php7.0-xsl \
    php7.0-zip \
    php7.0-bcmath \
    php7.0-sockets \
    php7.0-tokenizer \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*

# Enable Apache rewrite and php7.0 modules
RUN a2enmod rewrite && a2enmod php7.0

# Set up a custom virtual host configuration
COPY custom-virtual-host.conf /etc/apache2/sites-available/
RUN ln -s /etc/apache2/sites-available/custom-virtual-host.conf /etc/apache2/sites-enabled/

# Start Apache in foreground
CMD ["apache2ctl", "-D", "FOREGROUND"]
